<!-- 
<div class="alert alert-danger" *ngIf="localErrMsg$ | async as err" style="margin: 30px 0px 0px 0px">
  {{ err }}
</div>

<div style="min-height: 90vh;">
  <div class="row" style="box-shadow: -3px -36px 14px -29px rgba(0,0,0,0.41) inset; padding: 30px 0 20px 0;">
    <div class="row">
      <div class="col-3" style="padding-right: 0 !important;"><amr-graphselection></amr-graphselection></div>
      <div *ngIf="selectedId > 0" class="col-9" style="padding: 0 !important;"><amr-graphcriteria></amr-graphcriteria></div>
    </div>
    <div class="row" style="margin-top: 10px; width: 95%; margin-left: 30px; padding: 0;">
      <button class="btn btn-primary mr-1" type="button"
              [title]="(frmsValid) ? 'Show Chart' : 'Disabled until the form data is valid'"
              [disabled]="!frmsValid && !params" (click)="showChart($event);">
        {{ frmsValid ? 'Show Chart' : 'Disabled until the criteria is valid' }}
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col"><amr-graphresult></amr-graphresult></div>
  </div>
</div> -->
<div class="alert alert-danger" *ngIf="localErrMsg$ | async as err" style="margin: 30px 0px 0px 0px">
  {{ err }}
</div>
<div class="flex flex-col flex-auto min-w-0">
  <div class="flex flex-col w-full mx-auto py-2 px-6 sm:px-8 bg-card border-b gap-y-2">
    <div class="flex grid grid-cols-9 gap-2">
      <div class="col-span-2">
        <amr-graphselection></amr-graphselection>
      </div>
      <div class="col-span-7">
        <amr-graphcriteria *ngIf="selectedId > 0"></amr-graphcriteria>
      </div>
    </div>
    <div class="col-span-1 flex justify-end gap-x-2" *ngIf="selectedId > 0">
      <button mat-raised-button [color]="'primary'" type="button"
        [title]="(frmsValid) ? 'Show Chart' : 'Disabled until the criteria is valid'" class="dnm-btn dnm-btn-primary"
        [disabled]="!frmsValid && !params" (click)="showChart($event);">Show Chart</button>
      <button mat-raised-button [color]="'primary'" type="button"
        [title]="(frmsValid) ? 'Show Chart' : 'Disabled until the criteria is valid'" class="dnm-btn dnm-btn-primary"
        [disabled]="!frmsValid && !params" (click)="onExport()">Download Data</button>
    </div>
  </div>
  <div class="flex w-full justify-center">
    <amr-graphresult></amr-graphresult>
  </div>
  <div style="display:'none'">
    <dx-data-grid #totalDataGrid [dataSource]="totalGridDataSource" [showBorders]="true" (onExporting)="onExport()"
      [remoteOperations]="true" [wordWrapEnabled]="true" [hoverStateEnabled]="true"
      (onRowPrepared)="onRowPrepared($event)" (onCellPrepared)="onCellPrepared($event)">
      <dxo-scrolling mode="virtual" rowRenderingMode="virtual"></dxo-scrolling>
      <dxo-paging [pageSize]="100"></dxo-paging>
      <dxi-column dataField="ShortName" caption="Short Name" [minWidth]="120"></dxi-column>
      <dxi-column dataField="ReadingDateString" caption="Reading Date" [minWidth]="200">
        <!-- <dxo-format type="fixedPoint" [precision]="2"></dxo-format> -->
      </dxi-column>
      <dxi-column dataField="ReActEnergy" caption="Re Act Energy" [minWidth]="120">
        <!-- <dxo-format type="fixedPoint" [precision]="2"></dxo-format> -->
      </dxi-column>
      <dxi-column dataField="Demand" caption="Demand" [minWidth]="120">
        <!-- <dxo-format type="fixedPoint" [precision]="2"></dxo-format> -->
      </dxi-column>
      <dxi-column dataField="Calculated" caption="Calculated" [minWidth]="120">
        <!-- <dxo-format type="fixedPoint" [precision]="2"></dxo-format> -->
      </dxi-column>
      <dxi-column dataField="ActEnergy" caption="Act Energy" [minWidth]="120">
        <!-- <dxo-format type="fixedPoint" [precision]="2"></dxo-format> -->
      </dxi-column>
      <dxo-export [enabled]="true" [allowExportSelectedData]="false" [formats]="['pdf', 'excel']"></dxo-export>
      <!-- <div *dxTemplate="let data of 'cellValueTemplate'">
          <ng-container *ngIf="data.value != null; else emptyTemplate">
              R {{data.value | number : '1.2-2'}}
          </ng-container>
          <ng-template #emptyTemplate></ng-template>
      </div> -->
    </dx-data-grid>
  </div>
</div>