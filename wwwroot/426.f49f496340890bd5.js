"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[426],{6426:(Ce,P,s)=>{s.r(P),s.d(P,{AdminModule:()=>we});var p=s(88692),d=s(33178),i=s(20092),I=s(7666),h=s(9638),U=s(83331),e=s(64537),C=s(72516);let N=(()=>{class o{constructor(t,r){this.router=t,this.selectedTab=0}ngOnInit(){console.log(location.pathname),location.pathname.includes("amrMeter")&&(this.selectedTab=1)}onChange(t){this.router.navigate(0==t.index?["/admin/amrUser"]:["/admin/amrMeter"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.F0),e.Y36(d.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:8,vars:2,consts:[[1,"flex","flex-col","flex-auto","min-w-0","gap-y-4"],[1,"flex","border-t","-mt-px","pt-4","sm:pt-6"],[1,"w-full","mx-auto","admin"],[1,"sm:px-2",3,"animationDuration","selectedIndex","selectedTabChange"],["label","AMR Users"],["label","AMR Meters"],[1,"flex","px-8","py-2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-tab-group",3),e.NdJ("selectedTabChange",function(l){return r.onChange(l)}),e._UZ(4,"mat-tab",4)(5,"mat-tab",5),e.qZA()()(),e.TgZ(6,"div",6),e._UZ(7,"router-outlet"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("animationDuration","0")("selectedIndex",r.selectedTab))},dependencies:[d.lC,C.SP,C.uX],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Flex:opsz@8..144&display=swap";.nav-tabs[_ngcontent-%COMP%]{border-bottom:3px solid #9fa1a3;padding-bottom:1px}.link-hover[_ngcontent-%COMP%]{font-family:Open Sans;width:200px;font-size:16px;color:#fff;cursor:pointer;height:auto;text-align:center;border:none;background-size:300% 100%;border-radius:50px;margin:10px;padding:15px;text-decoration:none;transition:.4s all ease-in-out}.link-hover[_ngcontent-%COMP%]:hover{background-position:100% 0}.wizard[_ngcontent-%COMP%]{display:inline-block;margin-top:20px}.links[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-family:Roboto,sans-serif;color:#566787;font-weight:500;font-size:25px}.links[_ngcontent-%COMP%]:hover{color:#3d4060;transition:.2s all ease-in-out}.container[_ngcontent-%COMP%]{padding-top:40px}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#19233c;background-color:none!important}.amr-edit[_ngcontent-%COMP%]{width:36px;height:36px}  .admin .mat-tab-group .mat-tab-body-content{padding:0}']}),o})();var _=s(5792),A=s(98613),y=s(61610),m=s(78208);const J=function(o){return["/admin/amrUser/edit",o,0]};let Q=(()=>{class o{constructor(t,r){this.userService=t,this._router=r,this.user=this.userService.userValue,this.allowedPageSizes=_.Sx,this.onEdit=this.onEdit.bind(this)}ngOnInit(){this.user$=this.userService.user$,this.userService.getUser(this.user.Id).subscribe()}onEdit(t){t.event.preventDefault(),this._router.navigate([`/admin/amrUser/edit/${this.user.Id}/${t.row.data.Id}`])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.K),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:19,vars:21,consts:[[1,"flex","flex-col","relative"],[1,"absolute","left-2","top-2","z-20"],["mat-raised-button","","color","primary",1,"dnm-btn","dnm-btn-primary",3,"routerLink"],[1,"mr-1",3,"svgIcon"],[1,"flex","w-full"],[1,"flex","flex-col","bg-card","p-2"],[1,"grid-container",3,"dataSource","showBorders"],["rowRenderingMode","virtual"],[3,"pageSize"],[3,"visible","allowedPageSizes","displayMode","showPageSizeSelector","showInfo","showNavigationButtons"],["placeholder","Search...",3,"visible","width"],["dataField","ProfileName",3,"width"],["dataField","ScadaUserName",3,"width"],["dataField","SgdUrl"],["dataField","Active",3,"width"],["type","buttons"],["hint","Edit","icon","edit",3,"onClick"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e._UZ(3,"mat-icon",3),e._uU(4," Add new user "),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"dx-data-grid",6),e.ALo(8,"async"),e._UZ(9,"dxo-scrolling",7)(10,"dxo-paging",8)(11,"dxo-pager",9)(12,"dxo-search-panel",10)(13,"dxi-column",11)(14,"dxi-column",12)(15,"dxi-column",13)(16,"dxi-column",14),e.TgZ(17,"dxi-column",15),e._UZ(18,"dxi-button",16),e.qZA()()()()()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.VKq(19,J,r.user.Id)),e.xp6(1),e.Q6J("svgIcon","feather:addUser"),e.xp6(4),e.Q6J("dataSource",e.lcZ(8,17,r.user$).AmrScadaUsers)("showBorders",!0),e.xp6(3),e.Q6J("pageSize",10),e.xp6(1),e.Q6J("visible",!0)("allowedPageSizes",r.allowedPageSizes)("displayMode","compact")("showPageSizeSelector",!0)("showInfo",!0)("showNavigationButtons",!0),e.xp6(1),e.Q6J("visible",!0)("width",200),e.xp6(1),e.Q6J("width",200),e.xp6(1),e.Q6J("width",200),e.xp6(2),e.Q6J("width",120),e.xp6(2),e.Q6J("onClick",r.onEdit))},dependencies:[d.rH,h.lW,U.Hw,y.e,m.qvW,m.k4o,m.ilc,m.sXh,m.PXJ,m.XXE,p.Ov],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,200;8..144,400&display=swap";@import"https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap";span[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px}button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px;height:auto;margin:5px}div.row[_ngcontent-%COMP%]{height:-moz-fit-content!important;height:fit-content!important}table[_ngcontent-%COMP%]{height:150px;vertical-align:middle}thead[_ngcontent-%COMP%]{background-color:#5ec4e1!important;font-family:Roboto Flex,sans-serif}.table-responsive[_ngcontent-%COMP%]{background-color:#fff}tr[_ngcontent-%COMP%]{transition:.2s all ease-in-out;margin:5px;color:#545454}#noHover[_ngcontent-%COMP%]{font-size:17px;color:#000}#noHover[_ngcontent-%COMP%]:hover{background-color:#5ec4e1!important}tr[_ngcontent-%COMP%]:hover{background-color:#c7dff5d9}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#c7c7c759}tr[_ngcontent-%COMP%]:nth-child(even):hover{background-color:#c7dff5d9}.customButton[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;width:100%;height:auto;border-radius:50px;background-color:#dee8f7;transition:.2s all ease-in-out;border:none;color:#000;box-shadow:5px 5px 9px 1px #0000004d}.customButton[_ngcontent-%COMP%]:hover{transform:scale(1.03)}#topDetails[_ngcontent-%COMP%]{color:#565656;text-transform:uppercase}#userField[_ngcontent-%COMP%]{width:100%;background-color:#fff;height:90px;margin:10px 0;padding:10px;border:1px solid #ddd;border-radius:5px;color:#767676;box-shadow:0 6px 7px -1px #0000003b;cursor:pointer;transition:.2s all ease-in-out}#userField[_ngcontent-%COMP%]:hover{background-color:#e6e7e8}.alignItems[_ngcontent-%COMP%]{vertical-align:middle;margin:auto}#userLink[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-family:Roboto Flex,sans-serif;font-weight:300px;font-size:30px;color:#02002e}#userLink[_ngcontent-%COMP%]:hover{transition:.2s all ease-in-out;color:#02002eb2}#edit-link[_ngcontent-%COMP%]{font-weight:700;color:#19233c}#edit-link[_ngcontent-%COMP%]:hover{text-decoration:underline;font-weight:700;color:#566787}.imgHov[_ngcontent-%COMP%]{position:relative;width:25px;height:25px;float:left;margin-right:10px}.imgHov[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;bottom:0;right:0;background:#8f8e8f;color:#fff;margin-bottom:5px;font-family:sans-serif;opacity:0;visibility:hidden;transition:visibility 0s,opacity .5s linear}.imgHov[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{width:80px;padding:1px 5px;visibility:visible;opacity:.7}']}),o})();const D=function(){return["/admin/amrUser"]},z=function(o,n){return["/admin/amrUser/edit",o,n]};function F(o,n){if(1&o&&(e.TgZ(0,"div")(1,"div",3)(2,"div",4)(3,"h1",5),e._uU(4),e.qZA(),e.TgZ(5,"div",6)(6,"div",7)(7,"div",8)(8,"b")(9,"em"),e._uU(10,"Profile Name:"),e.qZA()()(),e.TgZ(11,"div",8),e._uU(12),e.qZA()(),e._UZ(13,"hr"),e.TgZ(14,"div",7)(15,"div",8)(16,"b")(17,"em"),e._uU(18,"Scada Username:"),e.qZA()()(),e.TgZ(19,"div",8),e._uU(20),e.qZA()(),e._UZ(21,"hr"),e.TgZ(22,"div",7)(23,"div",8)(24,"b")(25,"em"),e._uU(26,"Sgd Url:"),e.qZA()()(),e.TgZ(27,"div",8),e._uU(28),e.qZA()(),e._UZ(29,"hr"),e.TgZ(30,"div",7)(31,"div",8)(32,"b")(33,"em"),e._uU(34,"Active:"),e.qZA()()(),e.TgZ(35,"div",8),e._uU(36),e.qZA(),e._UZ(37,"hr"),e.qZA()(),e.TgZ(38,"div",9)(39,"button",10),e._UZ(40,"i",11),e._uU(41," Back "),e.qZA(),e.TgZ(42,"button",12),e._uU(43," Edit "),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(4),e.hij("User Details for User with Id: ",t.amrUser.Id,""),e.xp6(8),e.Oqu(t.amrUser.ProfileName),e.xp6(8),e.Oqu(t.amrUser.ScadaUserName),e.xp6(8),e.Oqu(t.amrUser.SgdUrl),e.xp6(8),e.Oqu(t.amrUser.Active),e.xp6(3),e.Q6J("routerLink",e.DdM(7,D)),e.xp6(3),e.Q6J("routerLink",e.WLB(8,z,t.opUser.Id,t.amrUser.Id))}}let L=(()=>{class o{constructor(t,r){this.route=t,this.usrService=r}ngOnInit(){const t=+this.route.snapshot.paramMap.get("id");this.opUser=this.usrService.userValue,this.amrUser=this.opUser.AmrScadaUsers.find(r=>r.Id==t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(A.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:3,vars:1,consts:[[2,"margin","40px 10px"],[2,"text-align","left","margin","30px 0"],[4,"ngIf"],[1,"card","row"],[1,"info","col-md-12"],[1,"title","card-header"],[1,"card-body","description"],[1,"row"],[1,"col-md-6"],[1,"card-footer","col-md-12"],["queryParamsHandling","preserve",1,"btn","btn-outline-secondary","mr-3",2,"width","80px",3,"routerLink"],[1,"fa","fa-chevron-left"],[1,"btn","btn-outline-primary",2,"width","80px",3,"routerLink"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"section",1),e.YNc(2,F,44,11,"div",2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",r.amrUser))},dependencies:[p.O5,d.rH],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz@8..144&display=swap";.card[_ngcontent-%COMP%]{border-radius:10px;width:100%;margin:0;max-width:100%;min-height:auto;height:auto;align-content:center;box-shadow:0 3px 5px -1px #0003,0 5px 8px #00000024,0 1px 14px #0000001f;overflow:hidden;background-size:cover}.info[_ngcontent-%COMP%]{position:relative;width:100%;height:auto;background-color:#ffffffd9;transition:transform .5s ease-out;padding:0}.info[_ngcontent-%COMP%]:before{z-index:-1;display:block;position:absolute;content:"";width:100%;height:100%;overflow:hidden;filter:blur(10px);background-size:cover;opacity:.25;transition:transform .5s ease-out}.title[_ngcontent-%COMP%]{margin:0;padding:24px;font-size:40px;line-height:1;color:#000000de}.description[_ngcontent-%COMP%]{margin:0;font-size:18px;line-height:1.5;font-family:Roboto Flex,sans-serif!important}.sideImage[_ngcontent-%COMP%]{width:100%;height:100%;border-top-left-radius:20px;border-bottom-left-radius:20px;background-position:bottom center;background-size:cover}@media only screen and (max-width: 800px){.title[_ngcontent-%COMP%]{margin:0;padding:24px;font-size:5vh;line-height:1;color:#000000de}}']}),o})();var x=s(17253);const E=function(o){return["/admin/amrMeter/edit",o,0]};let Y=(()=>{class o{constructor(t,r,a){this.meterService=t,this.userService=r,this._router=a,this.allowedPageSizes=_.Sx,this.onEdit=this.onEdit.bind(this)}ngOnInit(){this.user=this.userService.userValue,this.meters$=this.meterService.getMetersForUser(this.user.Id)}onEdit(t){t.event.preventDefault(),this._router.navigate([`/admin/amrMeter/edit/${this.user.Id}/${t.row.data.Id}`])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.kC),e.Y36(x.KD),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-amr-meter"]],decls:19,vars:21,consts:[[1,"flex","flex-col","relative"],[1,"absolute","left-2","top-2","z-20"],["mat-raised-button","","color","primary",1,"dnm-btn","dnm-btn-primary",3,"routerLink"],[1,"mr-1",3,"svgIcon"],[1,"flex","w-full"],[1,"flex","flex-col","bg-card","p-2"],[1,"grid-container",3,"dataSource","showBorders"],["rowRenderingMode","virtual"],[3,"pageSize"],[3,"visible","allowedPageSizes","displayMode","showPageSizeSelector","showInfo","showNavigationButtons"],["placeholder","Search...",3,"visible","width"],["dataField","MeterNo",3,"width"],["dataField","Description"],["dataField","Make",3,"width"],["dataField","Model",3,"width"],["type","buttons"],["hint","Edit","icon","edit",3,"onClick"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e._UZ(3,"mat-icon",3),e._uU(4," Add New Meter "),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"dx-data-grid",6),e.ALo(8,"async"),e._UZ(9,"dxo-scrolling",7)(10,"dxo-paging",8)(11,"dxo-pager",9)(12,"dxo-search-panel",10)(13,"dxi-column",11)(14,"dxi-column",12)(15,"dxi-column",13)(16,"dxi-column",14),e.TgZ(17,"dxi-column",15),e._UZ(18,"dxi-button",16),e.qZA()()()()()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.VKq(19,E,r.user.Id)),e.xp6(1),e.Q6J("svgIcon","feather:addMeter"),e.xp6(4),e.Q6J("dataSource",e.lcZ(8,17,r.meters$))("showBorders",!0),e.xp6(3),e.Q6J("pageSize",10),e.xp6(1),e.Q6J("visible",!0)("allowedPageSizes",r.allowedPageSizes)("displayMode","compact")("showPageSizeSelector",!0)("showInfo",!0)("showNavigationButtons",!0),e.xp6(1),e.Q6J("visible",!0)("width",200),e.xp6(1),e.Q6J("width",200),e.xp6(2),e.Q6J("width",120),e.xp6(1),e.Q6J("width",120),e.xp6(2),e.Q6J("onClick",r.onEdit))},dependencies:[d.rH,h.lW,U.Hw,y.e,m.qvW,m.k4o,m.ilc,m.sXh,m.PXJ,m.XXE,p.Ov],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,200;8..144,400&display=swap";@import"https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap";span[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px}button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px;height:auto;margin:5px}div.row[_ngcontent-%COMP%]{height:-moz-fit-content!important;height:fit-content!important}.hr_devider[_ngcontent-%COMP%]{border:2px solid #0a85b6;width:50%;border-radius:10px;margin:20px auto;align-self:center}#meterField[_ngcontent-%COMP%]{width:100%;background-color:#fff;height:90px;margin:0;padding:5px;border:1px solid #ddd;border-radius:5px;color:#767676;box-shadow:0 6px 7px -1px #0000003b;cursor:pointer;transition:.2s all ease-in-out}#meterField[_ngcontent-%COMP%]:hover{background-color:#e6e7e8}#edit-link[_ngcontent-%COMP%]{font-weight:700;color:#19233c}#edit-link[_ngcontent-%COMP%]:hover{text-decoration:underline;font-weight:700;color:#566787}.customButton[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;width:100%;height:auto;border-radius:50px;background-color:#dee8f7;transition:.2s all ease-in-out;border:none;color:#000;box-shadow:5px 5px 9px 1px #0000004d}.customButton[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.imgHov[_ngcontent-%COMP%]{position:relative;width:25px;height:25px;float:left;margin-right:10px}.imgHov[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;bottom:0;right:0;background:#8f8e8f;color:#fff;margin-bottom:5px;font-family:sans-serif;opacity:0;visibility:hidden;transition:visibility 0s,opacity .5s linear}.imgHov[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{width:80px;padding:1px 5px;visibility:visible;opacity:.7}']}),o})();var g=s(34553);const T={title:"Are you sure?",message:"",icon:{show:!0,name:"heroicons_outline:exclamation",color:"warn"},actions:{cancel:{show:!0,label:"Cancel",color:"warn"},confirm:{show:!0,color:"primary",label:"Ok"}},dismissible:!0};var B=s(36559),f=s(54536);function R(o){return n=>n.value&&n.value!=o?{check:!0}:null}var V=s(38023),S=s(16043),b=s(88659),w=s(39665);let H=(()=>{class o{constructor(){this.fields=[]}validate(t){return function X(o,n){return t=>{const r=t.controls[o],a=t.controls[n];if(!r||!a||!r.value||!a.value||a.errors&&!a.errors.matchValueError)return null;a.setErrors(r.value!=a.value?{matchValueError:!0}:null)}}(this.fields[0],this.fields[1])(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,selectors:[["","passwordMatchValidator",""]],inputs:{fields:["passwordMatchValidator","fields"]},features:[e._Bn([{provide:i.Cf,useExisting:o,multi:!0}])]}),o})();function W(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Current Password is required "),e.qZA())}function K(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Current Password must be at least three characters. "),e.qZA())}function G(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Supplied password is incorrect. "),e.qZA())}function j(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," New Password is required "),e.qZA())}function $(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," New Password must be at least three characters. "),e.qZA())}function ee(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Confirm Password is required. "),e.qZA())}function te(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Passwords do not match. "),e.qZA())}const re=function(){return["newPwd","confPwd"]};let oe=(()=>{class o{constructor(t,r,a,l){this.matDialogRef=t,this._formBuilder=r,this._ufUtils=l,this.submitted=!1,this._unsubscribeAll=new V.x,this.data=a}ngOnInit(){console.log("old password",this.data.currentPassword),this.form=this._formBuilder.group({currPwd:[null,[i.kI.required,i.kI.minLength(3),R(this.data.currentPassword)]],newPwd:["",[i.kI.required,i.kI.minLength(3)]],confPwd:["",i.kI.required]}),this.data.detail&&this.form.patchValue(this.data.detail)}close(){this.matDialogRef.close()}submit(){this.submitted=!0,this.form.valid&&this._ufUtils.fuseConfirmDialog(T,"","Are you sure you need to change password?").afterClosed().subscribe(r=>{"confirmed"==r?this.matDialogRef.close(this.form.value):this.matDialogRef.close()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.so),e.Y36(i.qu),e.Y36(f.WI),e.Y36(S.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-amr-user-password"]],decls:36,vars:22,consts:[[1,"flex","flex-col","flex-auto","min-w-120","max-w-120","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-12","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium","text-white"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-0","w-full","p-4","sm:p-6","gap-y-2",3,"formGroup","passwordMatchValidator"],[1,"row","grid","grid-cols-1","gap-2"],[1,"col-span-1"],[1,"fuse-mat-dense","w-full",3,"floatLabel"],[1,"form-label"],["matInput","","type","password",3,"formControlName","placeholder"],[4,"ngIf"],[1,"row","flex","gap-y-2","justify-end","flex"],["mat-stroked-button","","color","primary","type","button",1,"w-30","mr-4",3,"click"],["mat-raised-button","","color","primary","type","button",1,"dnm-btn","dnm-btn-primary","w-30",3,"disabled","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Change Password"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.matDialogRef.close()}),e._UZ(5,"mat-icon",4),e.qZA()(),e.TgZ(6,"form",5)(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label",9),e._uU(11," Password "),e.qZA(),e._UZ(12,"input",10),e.YNc(13,W,2,0,"mat-error",11),e.YNc(14,K,2,0,"mat-error",11),e.YNc(15,G,2,0,"mat-error",11),e.qZA()()(),e.TgZ(16,"div",7)(17,"mat-form-field",8)(18,"mat-label",9),e._uU(19," New Password "),e.qZA(),e._UZ(20,"input",10),e.YNc(21,j,2,0,"mat-error",11),e.YNc(22,$,2,0,"mat-error",11),e.qZA()(),e.TgZ(23,"div",7)(24,"mat-form-field",8)(25,"mat-label",9),e._uU(26," Confirm Password "),e.qZA(),e._UZ(27,"input",10),e.YNc(28,ee,2,0,"mat-error",11),e.YNc(29,te,2,0,"mat-error",11),e.qZA()(),e.TgZ(30,"div",12)(31,"div",7)(32,"button",13),e.NdJ("click",function(){return r.close()}),e._uU(33,"Cancel"),e.qZA(),e.TgZ(34,"button",14),e.NdJ("click",function(){return r.submit()}),e._uU(35,"Change"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("tabIndex",-1),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(1),e.Q6J("formGroup",r.form)("passwordMatchValidator",e.DdM(21,re)),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","currPwd")("placeholder","Current Password"),e.xp6(1),e.Q6J("ngIf",r.form.get("currPwd").getError("required")),e.xp6(1),e.Q6J("ngIf",null==r.form.get("currPwd").errors?null:r.form.get("currPwd").errors.minlength),e.xp6(1),e.Q6J("ngIf",null==r.form.get("currPwd").errors?null:r.form.get("currPwd").errors.check),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","newPwd")("placeholder","New Password (required)"),e.xp6(1),e.Q6J("ngIf",r.form.get("newPwd").getError("required")),e.xp6(1),e.Q6J("ngIf",null==r.form.get("newPwd").errors?null:r.form.get("newPwd").errors.minlength),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","confPwd")("placeholder","Confirm Password (required)"),e.xp6(1),e.Q6J("ngIf",null==r.form.get("confPwd").errors?null:r.form.get("confPwd").errors.required),e.xp6(1),e.Q6J("ngIf",r.form.get("confPwd").getError("matchValueError")),e.xp6(5),e.Q6J("disabled",!r.form.valid))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,p.O5,i.sg,i.u,h.lW,U.Hw,b.TO,b.KE,b.hX,w.Nt,H]}),o})(),ne=(()=>{class o{constructor(){this.modals=[]}add(t){this.modals.push(t)}remove(t){this.modals=this.modals.filter(r=>r.id!==t)}open(t){this.modals.find(a=>a.id===t).open()}close(t){this.modals.find(a=>a.id===t).close()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ie=s(66292);let ae=(()=>{class o{constructor(t){this.data=t}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:13,vars:7,consts:[[1,"card"],[1,"card-header"],["mat-dialog-title",""],["mat-icon-button","",3,"mat-dialog-close"],["src","/assets/images/icons/notify_Close_1.svg",2,"width","40px"],["mat-dialog-content","",1,"card-body"],["mat-dialog-actions","",1,"card-footer","border-t","flex","gap-x-2"],[1,"dnm-btn","dnm-btn-cancel",3,"mat-dialog-close"],["mat-raised-button","","color","primary",1,"dnm-btn","dnm-btn-primary",3,"mat-dialog-close"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e._UZ(5,"img",4),e.qZA()(),e.TgZ(6,"div",5),e._uU(7),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e._uU(10),e.qZA(),e.TgZ(11,"button",8),e._uU(12),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(null==r.data?null:r.data.Title),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(3),e.Oqu(null==r.data?null:r.data.Message),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Oqu(null==r.data?null:r.data.CancelText),e.xp6(1),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.Oqu(null==r.data?null:r.data.ConfirmText))},dependencies:[f.ZT,f.uh,f.xY,f.H8,h.lW],styles:[".card[_ngcontent-%COMP%]{border-radius:10px;margin-top:0}.card-body[_ngcontent-%COMP%]{padding:24px!important}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}button[_ngcontent-%COMP%]{width:80px;min-width:80px}"]}),o})(),q=(()=>{class o{constructor(t){this.dialog=t}confirmDialog(t){return this.dialog.open(ae,{data:t,width:"400px",disableClose:!0}).afterClosed()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(f.uw))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function se(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteAmrUser())}),e._uU(1,"Delete"),e.qZA()}}function le(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openModal("changePwd"))}),e._uU(1,"Change Password"),e.qZA()}}let de=(()=>{class o{constructor(t,r,a,l,c,v,M,u,Z){this.route=t,this.usrService=r,this.router=a,this.modalService=l,this.fb=c,this.snackBarService=v,this.dialogService=M,this._matDialog=u,this._ufUtils=Z,this.pageTitle="Edit Amr Scada User"}getAmrScadaUser(t){this.usrService.getAmrScadaUser(t).subscribe({next:r=>{this.onAmrScadaUserRetrieved(r),this.initForm()},error:r=>this.errMessage=r})}initForm(){console.log(this.amrUser),this.amrUser&&this.form.patchValue(this.amrUser)}onAmrScadaUserRetrieved(t){var r=this;return(0,g.Z)(function*(){r.amrUser=t,r.pageTitle=r.amrUser?0===r.amrUser.Id?"Add New User":`Edit User: ${r.amrUser.ScadaUserName}`:"User not found"})()}ngOnInit(){this.form=this.fb.group({Id:[0],ProfileName:[null,[i.kI.required,i.kI.minLength(3)]],ScadaUserName:[null,[i.kI.required,i.kI.minLength(3)]],SgdUrl:[null,[i.kI.required,i.kI.minLength(3)]],ScadaPassword:[null,[i.kI.required,i.kI.minLength(3)]]}),this.route.paramMap.subscribe(t=>{this.opUsrId=+t.get("opId");const r=+t.get("asuId");this.getAmrScadaUser(r)})}openModal(t){var r=this;return(0,g.Z)(function*(){var a=(yield r.usrService.decryptWrapper(r.amrUser.ScadaPassword)).toString();r._matDialog.open(oe,{autoFocus:!1,data:{currentPassword:a}}).afterClosed().subscribe(function(){var l=(0,g.Z)(function*(c){if(c){r.amrUser.ScadaPassword=c.newPwd;try{r.amrUser=yield(0,B.n)(r.usrService.changePwd(r.amrUser)),r.getAmrScadaUser(r.amrUser.Id),r.snackBarService.passDataToSnackComponent({msg:"Password Changed",style:"success"})}catch(v){r.errMessage=v.message}}});return function(c){return l.apply(this,arguments)}}())})()}closeModalNoMsg(t){this.errMessageModal="",this.formChangePwd.reset(),this.modalService.close(t)}closeModal(t,r,a){this.errMessageModal="",this.formChangePwd.reset(),this.modalService.close(t),this.snackBarService.passDataToSnackComponent(r||a?{msg:r,style:a}:{msg:"Operation Cancelled",style:a})}saveAmrUser(){var t=this;return(0,g.Z)(function*(){if(t.form.valid){const r={...t.amrUser,...t.form.value};r.ScadaPassword=(yield t.usrService.encryptWrapper(r.ScadaPassword)).toString(),t._ufUtils.fuseConfirmDialog(T,"","Are you sure you want to save?").afterClosed().subscribe(l=>{"confirmed"==l&&t.usrService.updateAmrScadaUser(t.opUsrId,r).subscribe({next:()=>{t.onSaveComplete()},error:c=>t.errMessage=c})})}})()}deleteAmrUser(){this.dialogService.confirmDialog(_.Cw.deleteDialog).subscribe({next:r=>{r&&this.usrService.deleteAmrScadaUser(this.opUsrId,this.amrUser).subscribe({next:()=>{this.getAmrScadaUser(this.amrUser.Id),this.router.navigate(["/admin"]),this.snackBarService.passDataToSnackComponent({msg:"User Removed",style:"success"})},error:a=>this.errMessage=a})},error:r=>this.errMessage=r})}onSaveComplete(){this.form.reset(),this.getAmrScadaUser(this.amrUser.Id),this.router.navigate(["/admin"])}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(A.K),e.Y36(d.F0),e.Y36(ne),e.Y36(i.qu),e.Y36(ie.c),e.Y36(q),e.Y36(f.uw),e.Y36(S.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:32,vars:17,consts:[[1,"flex","flex-col","bg-card","py-6","px-4","w-full",3,"formGroup"],[1,"text-lg","font-semibold","mb-2"],[1,"row","grid","grid-cols-2","gap-x-4","gap-y-2","w-full"],[1,"col-span-1"],[1,"fuse-mat-dense","w-full",3,"floatLabel"],[1,"form-label"],["matInput","",3,"formControlName","placeholder"],["matInput","",3,"formControlName","placeholder","readonly"],[1,"pt-3","px-4","border-t","border-gray-300","text-gray-600","flex","justify-end","gap-x-4"],["class","dnm-btn dnm-btn-delete","type","button",3,"click",4,"ngIf"],["routerLink","/admin","type","button",1,"dnm-btn","dnm-btn-cancel"],["mat-raised-button","","color","primary","type","button",1,"dnm-btn","dnm-btn-primary",3,"click"],["mat-raised-button","","color","primary","class","text-white",3,"click",4,"ngIf"],["type","button",1,"dnm-btn","dnm-btn-delete",3,"click"],["mat-raised-button","","color","primary",1,"text-white",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label",5),e._uU(7,"Profile Name"),e.qZA(),e._UZ(8,"input",6),e.qZA()(),e.TgZ(9,"div",3)(10,"mat-form-field",4)(11,"mat-label",5),e._uU(12,"Scada User Name"),e.qZA(),e._UZ(13,"input",6),e.qZA()()(),e.TgZ(14,"div",2)(15,"div",3)(16,"mat-form-field",4)(17,"mat-label",5),e._uU(18,"SGD Url"),e.qZA(),e._UZ(19,"input",6),e.qZA()(),e.TgZ(20,"div",3)(21,"mat-form-field",4)(22,"mat-label",5),e._uU(23,"Password"),e.qZA(),e._UZ(24,"input",7),e.qZA()()(),e.TgZ(25,"div",8),e.YNc(26,se,2,0,"button",9),e.TgZ(27,"button",10),e._uU(28,"Cancel"),e.qZA(),e.TgZ(29,"button",11),e.NdJ("click",function(){return r.saveAmrUser()}),e._uU(30,"Save"),e.qZA(),e.YNc(31,le,2,0,"button",12),e.qZA()()),2&t&&(e.Q6J("formGroup",r.form),e.xp6(2),e.Oqu(r.pageTitle),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","ProfileName")("placeholder","Profile Name (required)"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","ScadaUserName")("placeholder","User Name (required)"),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","SgdUrl")("placeholder","SGD Url (required)"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","ScadaPassword")("placeholder","Password (required)")("readonly",r.amrUser&&r.amrUser.Id>0),e.xp6(2),e.Q6J("ngIf",r.amrUser&&r.amrUser.Id>0),e.xp6(5),e.Q6J("ngIf",r.amrUser&&r.amrUser.Id>0))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,p.O5,d.rH,i.sg,i.u,h.lW,b.KE,b.hX,w.Nt],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,200;8..144,400&display=swap";.card[_ngcontent-%COMP%]{margin:40px 10px;box-shadow:10px 10px 33px -6px #a1a1a1;border-radius:10px}#title[_ngcontent-%COMP%]{font-family:Roboto Flex,sans-serif;font-weight:800;font-size:1.5em;color:#19233c;margin:0}.card-footer[_ngcontent-%COMP%]{margin:0}']}),o})();var me=s(44063);const ce=function(){return["/admin/amrMeter"]},ue=function(o,n){return["/admin/amrMeter/edit",o,n]};function pe(o,n){if(1&o&&(e.TgZ(0,"div")(1,"div",3)(2,"div",4)(3,"h1",5),e._uU(4),e.qZA(),e.TgZ(5,"div",6)(6,"div",7)(7,"div",8)(8,"b")(9,"em"),e._uU(10,"Description:"),e.qZA()()(),e.TgZ(11,"div",8),e._uU(12),e.qZA()(),e._UZ(13,"hr"),e.TgZ(14,"div",7)(15,"div",8)(16,"b")(17,"em"),e._uU(18,"Building:"),e.qZA()()(),e.TgZ(19,"div",8),e._uU(20),e.qZA()(),e._UZ(21,"hr"),e.TgZ(22,"div",7)(23,"div",8)(24,"b")(25,"em"),e._uU(26,"Make:"),e.qZA()()(),e.TgZ(27,"div",8),e._uU(28),e.qZA()(),e._UZ(29,"hr"),e.TgZ(30,"div",7)(31,"div",8)(32,"b")(33,"em"),e._uU(34,"Model:"),e.qZA()()(),e.TgZ(35,"div",8),e._uU(36),e.qZA()(),e._UZ(37,"hr"),e.TgZ(38,"div",7)(39,"div",8)(40,"b")(41,"em"),e._uU(42,"Phase:"),e.qZA()()(),e.TgZ(43,"div",8),e._uU(44),e.qZA()(),e._UZ(45,"hr"),e.TgZ(46,"div",7)(47,"div",8)(48,"b")(49,"em"),e._uU(50,"CB Size:"),e.qZA()()(),e.TgZ(51,"div",8),e._uU(52),e.qZA()(),e._UZ(53,"hr"),e.TgZ(54,"div",7)(55,"div",8)(56,"b")(57,"em"),e._uU(58,"CT Size Primary:"),e.qZA()()(),e.TgZ(59,"div",8),e._uU(60),e.qZA()(),e._UZ(61,"hr"),e.TgZ(62,"div",7)(63,"div",8)(64,"b")(65,"em"),e._uU(66,"CT Size Secondary:"),e.qZA()()(),e.TgZ(67,"div",8),e._uU(68),e.qZA()(),e._UZ(69,"hr"),e.TgZ(70,"div",7)(71,"div",8)(72,"b")(73,"em"),e._uU(74,"Programmed Factor:"),e.qZA()()(),e.TgZ(75,"div",8),e._uU(76),e.qZA()(),e._UZ(77,"hr"),e.TgZ(78,"div",7)(79,"div",8)(80,"b")(81,"em"),e._uU(82,"Displayed Digits:"),e.qZA()()(),e.TgZ(83,"div",8),e._uU(84),e.qZA()(),e._UZ(85,"hr"),e.TgZ(86,"div",7)(87,"div",8)(88,"b")(89,"em"),e._uU(90,"Utility:"),e.qZA()()(),e.TgZ(91,"div",8),e._uU(92),e.qZA()(),e._UZ(93,"hr"),e.TgZ(94,"div",7)(95,"div",8)(96,"b")(97,"em"),e._uU(98,"Scada Comms Id:"),e.qZA()()(),e.TgZ(99,"div",8),e._uU(100),e.qZA()(),e._UZ(101,"hr"),e.TgZ(102,"div",7)(103,"div",8)(104,"b")(105,"em"),e._uU(106,"Scada Serial No.:"),e.qZA()()(),e.TgZ(107,"div",8),e._uU(108),e.qZA()()(),e.TgZ(109,"div",9)(110,"button",10),e._UZ(111,"i",11),e._uU(112," Back "),e.qZA(),e.TgZ(113,"button",12),e._uU(114," Edit "),e.qZA()()()()()),2&o){const t=n.ngIf;e.xp6(4),e.hij("Meter Details for Meter: ",t.MeterNo,""),e.xp6(8),e.Oqu(t.Description),e.xp6(8),e.Oqu(t.BuildingName),e.xp6(8),e.Oqu(t.Make),e.xp6(8),e.Oqu(t.Model),e.xp6(8),e.Oqu(t.Phase),e.xp6(8),e.Oqu(t.CbSize),e.xp6(8),e.Oqu(t.CtSizePrim),e.xp6(8),e.Oqu(t.CtSizeSec),e.xp6(8),e.Oqu(t.ProgFact),e.xp6(8),e.Oqu(t.Digits),e.xp6(8),e.Oqu(t.Utility),e.xp6(8),e.Oqu(t.CommsId),e.xp6(8),e.Oqu(t.MeterSerial),e.xp6(2),e.Q6J("routerLink",e.DdM(16,ce)),e.xp6(3),e.Q6J("routerLink",e.WLB(17,ue,t.UserId,t.Id))}}let ge=(()=>{class o{constructor(t,r){this.route=t,this.meterService=r}ngOnInit(){const t=+this.route.snapshot.paramMap.get("id");this.meter$=this.meterService.getMeter(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(me.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:4,vars:3,consts:[[2,"margin","40px 10px"],[2,"text-align","left","margin","30px 0"],[4,"ngIf"],[1,"card","row"],[1,"info","col-md-12"],[1,"title","card-header"],[1,"card-body","description"],[1,"row"],[1,"col-md-6"],[1,"card-footer","col-md-12"],["queryParamsHandling","preserve",1,"btn","btn-outline-secondary","mr-3",2,"width","80px",3,"routerLink"],[1,"fa","fa-chevron-left"],[1,"btn","btn-outline-primary",2,"width","80px",3,"routerLink"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"section",1),e.YNc(2,pe,115,20,"div",2),e.ALo(3,"async"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,r.meter$)))},dependencies:[p.O5,d.rH,p.Ov],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz@8..144&display=swap";.card[_ngcontent-%COMP%]{border-radius:10px;width:100%;margin:0;max-width:100%;min-height:auto;height:auto;align-content:center;box-shadow:0 3px 5px -1px #0003,0 5px 8px #00000024,0 1px 14px #0000001f;overflow:hidden;background-size:cover}.info[_ngcontent-%COMP%]{position:relative;width:100%;height:auto;background-color:#ffffffd9;transition:transform .5s ease-out;padding:0}.info[_ngcontent-%COMP%]:before{z-index:-1;display:block;position:absolute;content:"";width:100%;height:100%;overflow:hidden;filter:blur(10px);background-size:cover;opacity:.25;transition:transform .5s ease-out}.title[_ngcontent-%COMP%]{margin:0;padding:24px;font-size:40px;line-height:1;color:#000000de}.description[_ngcontent-%COMP%]{margin:0;font-size:18px;line-height:1.5;font-family:Roboto Flex,sans-serif!important}.sideImage[_ngcontent-%COMP%]{width:100%;height:100%;border-top-left-radius:20px;border-bottom-left-radius:20px;background-position:bottom center;background-size:cover}@media only screen and (max-width: 800px){.title[_ngcontent-%COMP%]{margin:0;padding:24px;font-size:5vh;line-height:1;color:#000000de}}']}),o})();var k=s(85806),O=s(11208);function fe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteAmrMeter())}),e._uU(1,"Delete"),e.qZA()}}let he=(()=>{class o{constructor(t,r,a,l,c,v,M,u){this.route=t,this.router=r,this.meterService=a,this.sbService=l,this.bldService=c,this.usrService=v,this.dialogService=M,this._formBuilder=u,this.loading=!0,this.pageTitle="Edit Amr Meter",this.phaseItems=[{Label:"Single",Id:1},{Label:"Dual",Id:2},{Label:"Three",Id:3}]}getAmrMeter(t){this.meterService.getMeter(t).subscribe({next:r=>{this.onAmrMeterRetrieved(r),this.getUtilities(),this.getBuildings(),this.initForm()},error:r=>this.errMessage=r})}getUtilities(){this.meterService.getUtilties().subscribe({next:t=>{this.onUtilitiesRetrieved(t)},error:t=>this.errMessage=t.error})}getBuildings(){this.bldService.getBuildingsForUser(this.usrService.userValue.UmfaId).subscribe({next:r=>{this.onBuildingsRetrieved(r)},error:r=>this.errMessage=r,complete:()=>this.loading=!1})}onUtilitiesRetrieved(t){var r=this;return(0,g.Z)(function*(){r.utils=t,0==r.amrMeter.Id?r.changeUtil(r.utils[0].Id):r.makes=r.utils.find(a=>a.Id==r.amrMeter.UtilityId).MakeModels})()}onBuildingsRetrieved(t){var r=this;return(0,g.Z)(function*(){r.buildings=t,0==r.amrMeter.Id&&(r.amrMeter.UmfaId=r.buildings[0].BuildingId)})()}onAmrMeterRetrieved(t){var r=this;return(0,g.Z)(function*(){r.amrMeter=t,r.amrMeter?0===r.amrMeter.Id?(r.pageTitle="Add New Meter",r.amrMeter.UserId=r.opUsrId):r.pageTitle=`Edit Meter: ${r.amrMeter.MeterNo}`:r.pageTitle="User not found"})()}ngOnInit(){this.form=this._formBuilder.group({Id:[0],MeterNo:[null,[i.kI.required,i.kI.minLength(3)]],Description:["",[i.kI.required,i.kI.minLength(3)]],UmfaId:[null,[i.kI.required]],UtilityId:[null,[i.kI.required]],MakeModelId:[null,[i.kI.required]],Make:["",[i.kI.required]],Model:["",[i.kI.required]],Phase:[null,[i.kI.required]],CbSize:[null,[i.kI.required,i.kI.min(5)]],CtSizePrim:[null,[i.kI.required,i.kI.min(5)]],CtSizeSec:[null,[i.kI.required]],ProgFact:[null,[i.kI.required]],Digits:[null,[i.kI.required]],CommsId:[null,[i.kI.required]],MeterSerial:[null,[i.kI.required]]}),this.route.paramMap.subscribe(t=>{this.opUsrId=+t.get("opId");const r=+t.get("meterId");this.getAmrMeter(r)})}initForm(){console.log(this.amrMeter),this.amrMeter&&this.form.patchValue(this.amrMeter)}selectUtil(t){this.changeUtil(t)}makeModelChange(t){this.changeMakeModel(t)}changeMakeModel(t){var r=this.makes.find(a=>a.Id==t);this.amrMeter.MakeModelId=r.Id,this.amrMeter.Make=r.Make,this.amrMeter.Model=r.Model,this.form.get("Make").setValue(r.Make),this.form.get("Model").setValue(r.Model)}changeUtil(t){var r=this.utils.find(a=>a.Id==t);this.makes=r.MakeModels,this.amrMeter.UtilityId=r.Id,this.amrMeter.Utility=r.Name,this.changeMakeModel(this.makes[0].Id)}saveAmrMeter(){var t=this;return(0,g.Z)(function*(){if(t.form.valid){t.updMeter=new k.WK,t.updMeter.UserId=t.opUsrId;let c=t.form.value,v=t.utils.find(u=>u.Id==t.form.get("UtilityId").value).Name;var a=t.buildings.find(u=>u.BuildingId==t.form.get("UmfaId").value);t.updMeter.Meter={...c,Utility:v,BuildingName:a.Name},t.dialogService.confirmDialog(_.Cw.updateDialog).subscribe({next:u=>{u?t.meterService.updateMeter(t.updMeter).subscribe({next:Z=>{t.amrMeter=Z,t.router.navigate(["admin/amrMeter"]),t.sbService.passDataToSnackComponent({msg:"Meter saved Successfully",style:"success"})},error:Z=>t.errMessage=Z}):t.sbService.passDataToSnackComponent({msg:"Meter Not Changed",style:"cancel"})},error:u=>t.errMessage=u})}})()}deleteAmrMeter(){var t=this;return(0,g.Z)(function*(){t.updMeter=new k.WK,t.updMeter.UserId=t.opUsrId,t.updMeter.Meter=t.amrMeter,t.updMeter.Meter.Active=!1,t.dialogService.confirmDialog(_.Cw.deleteDialog).subscribe({next:a=>{a?t.meterService.updateMeter(t.updMeter).subscribe({next:l=>{t.amrMeter=l,t.router.navigate(["admin/amrMeter"]),t.sbService.passDataToSnackComponent({msg:"Meter Removed Successfully",style:"success"})},error:l=>t.errMessage=l}):t.sbService.passDataToSnackComponent({msg:"Meter Not Removed",style:"cancel"})},error:a=>t.errMessage=a})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(x.kC),e.Y36(x.cw),e.Y36(x.Fl),e.Y36(x.KD),e.Y36(q),e.Y36(i.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:82,vars:46,consts:[[1,"flex","flex-col","bg-card","py-6","px-4","w-full",3,"formGroup"],[1,"row","grid","grid-cols-3","gap-x-4","gap-y-2","w-full"],[1,"col-span-1"],[1,"fuse-mat-dense","w-full",3,"floatLabel"],[1,"form-label"],["matInput","",3,"formControlName","placeholder"],[1,"col-span-2"],[1,"row","grid","grid-cols-5","gap-x-4","gap-y-2","w-full"],["bindLabel","Name","bindValue","BuildingId",3,"items","placeholder","formControlName","searchable","clearable"],["bindLabel","Name","bindValue","Id",3,"items","placeholder","formControlName","searchable","clearable","change"],["bindLabel","Description","bindValue","Id",3,"items","placeholder","formControlName","searchable","clearable","change"],["matInput","",3,"formControlName"],[1,"row","grid","grid-cols-4","gap-x-4","gap-y-2","w-full"],["bindLabel","Label","bindValue","Id",3,"items","placeholder","formControlName","searchable","clearable"],["matInput","","type","number","placeholder","Circuit Breaker Size",3,"formControlName"],["matInput","","type","number","placeholder","CT Primary",3,"formControlName"],["matInput","","type","number","placeholder","CT Secondary",3,"formControlName"],["matInput","","type","number","placeholder","Programmed Factor",3,"formControlName"],["matInput","","type","number","placeholder","Number of digits on display",3,"formControlName"],["type","number",1,"fuse-mat-dense","w-full",3,"floatLabel"],["matInput","","placeholder","Scada Comms Id",3,"formControlName"],["matInput","","placeholder","Scada Serial Number",3,"formControlName"],[1,"pt-3","px-4","border-t","border-gray-300","text-gray-600","flex","justify-end","gap-x-4"],["class","dnm-btn dnm-btn-delete","type","button",3,"click",4,"ngIf"],["routerLink","/admin/amrMeter","type","button",1,"dnm-btn","dnm-btn-cancel"],["mat-raised-button","","color","primary",1,"dnm-btn","dnm-btn-primary",3,"click"],["type","button",1,"dnm-btn","dnm-btn-delete",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label",4),e._uU(5,"Meter No"),e.qZA(),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"div",6)(8,"mat-form-field",3)(9,"mat-label",4),e._uU(10,"Description"),e.qZA(),e._UZ(11,"input",5),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",2)(14,"mat-label",4),e._uU(15," Building "),e.qZA(),e._UZ(16,"ng-select",8),e.qZA(),e.TgZ(17,"div",2)(18,"mat-label",4),e._uU(19," Utility "),e.qZA(),e.TgZ(20,"ng-select",9),e.NdJ("change",function(l){return r.selectUtil(l.Id)}),e.qZA()(),e.TgZ(21,"div",2)(22,"mat-label",4),e._uU(23," Meter Type "),e.qZA(),e.TgZ(24,"ng-select",10),e.NdJ("change",function(l){return r.makeModelChange(l.Id)}),e.qZA()(),e.TgZ(25,"div",2)(26,"mat-form-field",3)(27,"mat-label",4),e._uU(28,"Make"),e.qZA(),e._UZ(29,"input",11),e.qZA()(),e.TgZ(30,"div",2)(31,"mat-form-field",3)(32,"mat-label",4),e._uU(33,"Model"),e.qZA(),e._UZ(34,"input",11),e.qZA()()(),e.TgZ(35,"div",12)(36,"div",2)(37,"mat-label",4),e._uU(38," Phase "),e.qZA(),e._UZ(39,"ng-select",13),e.qZA(),e.TgZ(40,"div",2)(41,"mat-form-field",3)(42,"mat-label",4),e._uU(43,"CB Size"),e.qZA(),e._UZ(44,"input",14),e.qZA()(),e.TgZ(45,"div",2)(46,"mat-form-field",3)(47,"mat-label",4),e._uU(48,"CT Primary"),e.qZA(),e._UZ(49,"input",15),e.qZA()(),e.TgZ(50,"div",2)(51,"mat-form-field",3)(52,"mat-label",4),e._uU(53,"CT Secondary"),e.qZA(),e._UZ(54,"input",16),e.qZA()()(),e.TgZ(55,"div",12)(56,"div",2)(57,"mat-form-field",3)(58,"mat-label",4),e._uU(59,"Programmed Factor"),e.qZA(),e._UZ(60,"input",17),e.qZA()(),e.TgZ(61,"div",2)(62,"mat-form-field",3)(63,"mat-label",4),e._uU(64,"Number of Digits"),e.qZA(),e._UZ(65,"input",18),e.qZA()(),e.TgZ(66,"div",2)(67,"mat-form-field",19)(68,"mat-label",4),e._uU(69,"Scada Comms Id"),e.qZA(),e._UZ(70,"input",20),e.qZA()(),e.TgZ(71,"div",2)(72,"mat-form-field",3)(73,"mat-label",4),e._uU(74,"Scada Serial No"),e.qZA(),e._UZ(75,"input",21),e.qZA()()(),e.TgZ(76,"div",22),e.YNc(77,fe,2,0,"button",23),e.TgZ(78,"button",24),e._uU(79,"Cancel"),e.qZA(),e.TgZ(80,"button",25),e.NdJ("click",function(){return r.saveAmrMeter()}),e._uU(81,"Save"),e.qZA()()()),2&t&&(e.Q6J("formGroup",r.form),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","MeterNo")("placeholder","Meter No"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","Description")("placeholder","Description"),e.xp6(5),e.Q6J("items",r.buildings)("placeholder","Select Building")("formControlName","UmfaId")("searchable",!1)("clearable",!1),e.xp6(4),e.Q6J("items",r.utils)("placeholder","Select Utility")("formControlName","UtilityId")("searchable",!1)("clearable",!1),e.xp6(4),e.Q6J("items",r.makes)("placeholder","Select Make/Model")("formControlName","MakeModelId")("searchable",!1)("clearable",!1),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","Make"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","Model"),e.xp6(5),e.Q6J("items",r.phaseItems)("placeholder","Select Phase")("formControlName","Phase")("searchable",!1)("clearable",!1),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","CbSize"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","CtSizePrim"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","CtSizeSec"),e.xp6(3),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","ProgFact"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","Digits"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","CommsId"),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(3),e.Q6J("formControlName","MeterSerial"),e.xp6(2),e.Q6J("ngIf",r.amrMeter&&r.amrMeter.Id>0))},dependencies:[i._Y,i.Fj,i.wV,i.JJ,i.JL,p.O5,d.rH,i.sg,i.u,h.lW,b.KE,b.hX,w.Nt,O.w9],styles:["button[_ngcontent-%COMP%]{min-width:120px}"]}),o})();const ve=[{path:"",component:N,resolve:{data:s(66279).i},children:[{path:"",redirectTo:"amrUser",pathMatch:"full"},{path:"amrUser",component:Q},{path:"amrUser/:id",component:L},{path:"amrMeter",component:Y},{path:"amrUser/edit/:opId/:asuId",component:de},{path:"amrMeter/:id",component:ge},{path:"amrMeter/edit/:opId/:meterId",component:he}]}];let xe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,d.Bz.forChild(ve),d.Bz]}),o})();var Ue=s(74350),_e=s(37767),Me=s(20039),Ze=s(50317);let we=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[i.u5,p.ez,xe,Ue.O,i.UX,I.ZX,h.ot,U.Ps,C.Nh,Ze.p0,b.lN,w.c,O.A0,y.x,Me.e,_e.m,d.Bz,I.ZX,h.ot,U.Ps]}),o})()}}]);